---
import { getCollection } from "astro:content";
import { addAppInfos } from "../../helpers/apps";
import { SITE } from "../../../config.mjs";

export async function getStaticPaths() {
  const apps = await getCollection("app", ({ data }) => data.appStoreId);
  const appDetails = await addAppInfos(apps);

  return appDetails.map((app) => ({
    params: {
      slug: app.app.slug,
    },
    props: {
      app,
    },
  }));
}

const { app } = Astro.props;
const meta = {
  title: `${app.app.data.title} â€” ${SITE.name}`,
  description: app.app.data.description,
  image: app.iconUrl,
  ogTitle: app.title,
  ogType: "product",
  appStoreId: app.appStoreId,
};
---
